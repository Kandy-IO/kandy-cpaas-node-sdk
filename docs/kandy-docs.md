<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [createClient][1]
    -   [Parameters][2]
    -   [Examples][3]
-   [Conversation][4]
    -   [createMessage][5]
        -   [Parameters][6]
    -   [getMessages][7]
        -   [Parameters][8]
    -   [getStatus][9]
        -   [Parameters][10]
    -   [getMessagesInThread][11]
        -   [Parameters][12]
    -   [deleteMessage][13]
        -   [Parameters][14]
    -   [getSubscriptions][15]
        -   [Parameters][16]
    -   [getSubscription][17]
        -   [Parameters][18]
    -   [subscribe][19]
        -   [Parameters][20]
    -   [unsubscribe][21]
        -   [Parameters][22]
-   [Notification][23]
    -   [parse][24]
        -   [Parameters][25]
-   [Twofactor][26]
    -   [sendCode][27]
        -   [Parameters][28]
    -   [verifyCode][29]
        -   [Parameters][30]
    -   [resendCode][31]
        -   [Parameters][32]
    -   [deleteCode][33]
        -   [Parameters][34]

## createClient

Node SDK

Instantiate the instance with clientId & clientSecret.

### Parameters

-   `params` **[Object][35]** 
    -   `params.clientId` **[string][36]** Private project key / Account client ID. If Private project key is used then client_secret is mandatory. If account client ID is used then email and password are mandatory.
    -   `params.baseUrl` **[string][36]** URL of the server to be used.
    -   `params.clientSecret` **[string][36]?** Private project secret
    -   `params.email` **[string][36]?** Account login email.
    -   `params.password` **[string][36]?** Account login password.

### Examples

```javascript
const client = createClient({
  clientId: '<private project key>',
  clientSecret: '<private project secret>',
  baseUrl: '<base url>'
})

or

const client = createClient({
   clientId: '<account client ID>',
   email: '<account email>',
   password: '<account password>',
   baseUrl: '<base url>'
})
```

## Conversation

CPaaS conversation.

### createMessage

Send a new outbound message

#### Parameters

-   `params` **[Object][35]** 
    -   `params.type` **[string][36]** Type of conversation. Possible value(s) - sms. Check conversation.types for more options (optional, default `this.types.SMS`)
    -   `params.destinationAddress` **([Array][37]&lt;[string][36]> | [string][36])** Indicates which DID number(s) used as destination for this SMS.
    -   `params.message` **[string][36]** SMS text message
    -   `params.senderAddress` **[string][36]** Sender address information, basically the from address. E164 formatted DID number passed as a value, which is owned by the user. If the user wants to let CPaaS uses the default assigned DID number, this field can either has "default" value or the same value as the userId.

Returns **[Promise][38]&lt;[Object][35]>** 

### getMessages

Gets all messages.

#### Parameters

-   `params` **[Object][35]**  (optional, default `{}`)
    -   `params.type` **[string][36]** Type of conversation. Possible value(s) - sms. Check conversation.types for more options (optional, default `this.types.SMS`)
    -   `params.query` **[Object][35]?** 
        -   `params.query.name` **[string][36]?** Performs search operation on firstName and lastName fields.
        -   `params.query.firstName` **[string][36]?** Performs search for the firstName field of the directory items.
        -   `params.query.lastName` **[string][36]?** Performs search for the lastName field of the directory items.
        -   `params.query.userName` **[string][36]?** Performs search for the userName field of the directory items.
        -   `params.query.phoneNumber` **[string][36]?** Performs search for the fields containing a phone number, like businessPhoneNumber, homePhoneNumber, mobile, pager, fax.
        -   `params.query.order` **[string][36]?** Ordering the contact results based on the requested sortBy value, order query parameter should be accompanied by sortBy query parameter.
        -   `params.query.sortBy` **[string][36]?** SortBy value is used to detect sorting the contact results based on which attribute. If order is not provided with that, ascending order is used.
        -   `params.query.max` **[number][39]?** Maximum number of contact results that has been requested from CPaaS for this query.
        -   `params.query.next` **[string][36]?** Pointer for the next chunk of contacts, should be gathered from the previous query results.
    -   `params.remoteAddress` **[string][36]?** Remote address information while retrieving the SMS history, basically the destination telephone number that user exchanged SMS before. E164 formatted DID number passed as a value.
    -   `params.localAddress` **[string][36]?** Local address information while retrieving the SMS history, basically the source telephone number that user exchanged SMS before.

Returns **[Promise][38]&lt;[Object][35]>** 

### getStatus

Read a conversation message status

#### Parameters

-   `params` **[Object][35]** 
    -   `params.type` **[string][36]** Type of conversation. Possible value(s) - sms. Check conversation.types for more options (optional, default `this.types.SMS`)
    -   `params.localAddress` **[string][36]** Local address information while retrieving the SMS history, basically the source telephone number that user exchanged SMS before.
    -   `params.messageId` **[string][36]** Identification of the SMS message.
    -   `params.remoteAddress` **[string][36]** Remote address information while retrieving the SMS history, basically the destination telephone number that user exchanged SMS before. E164 formatted DID number passed as a value.

Returns **[Promise][38]&lt;[Object][35]>** 

### getMessagesInThread

Read all messages in a thread

#### Parameters

-   `params` **[Object][35]** 
    -   `params.type` **[string][36]** Type of conversation. Possible value(s) - sms. Check conversation.types for more options (optional, default `this.types.SMS`)
    -   `params.localAddress` **[string][36]** Local address information while retrieving the SMS history, basically the source telephone number that user exchanged SMS before.
    -   `params.remoteAddress` **[string][36]** Remote address information while retrieving the SMS history, basically the destination telephone number that user exchanged SMS before. E164 formatted DID number passed as a value.
    -   `params.query` **[Object][35]?** 
        -   `params.query.max` **[number][39]?** Number of messages that is requested from CPaaS.
        -   `params.query.next` **[string][36]?** Pointer for the next page to retrieve for the messages, provided by CPaaS in previous GET response.
        -   `params.query.new` **[string][36]?** Filters the messages or threads having messages that are not received by the user yet
        -   `params.query.lastMessageTime` **[number][39]?** Filters the messages or threads having messages that are sent/received after provided Epoch time

Returns **[Promise][38]&lt;[Object][35]>** 

### deleteMessage

Delete conversation message

#### Parameters

-   `params` **[Object][35]** 
    -   `params.type` **[string][36]** Type of conversation. Possible value(s) - sms. Check conversation.types for more options (optional, default `this.types.SMS`)
    -   `params.localAddress` **[string][36]** Local address information while retrieving the SMS history, basically the source telephone number that user exchanged SMS before.
    -   `params.messageId` **[string][36]?** Identification of the SMS message. If messageId is not passed then the SMS thread is deleted with all messages.
    -   `params.remoteAddress` **[string][36]** Remote address information while retrieving the SMS history, basically the destination telephone number that user exchanged SMS before. E164 formatted DID number passed as a value.

Returns **[Promise][38]&lt;[Object][35]>** 

### getSubscriptions

Read all active subscriptions

#### Parameters

-   `params` **[Object][35]**  (optional, default `{}`)
    -   `params.type` **[string][36]** Type of conversation. Possible value(s) - sms. Check conversation.types for more options (optional, default `this.types.SMS`)

Returns **[Promise][38]&lt;[Array][37]>** 

### getSubscription

Read active subscription

#### Parameters

-   `params` **[Object][35]** 
    -   `params.type` **[string][36]** Type of conversation. Possible value(s) - sms. Check conversation.types for more options (optional, default `this.types.SMS`)
    -   `params.subscriptionId` **[string][36]** Resource ID of the subscription

Returns **[Promise][38]&lt;[Object][35]>** 

### subscribe

Create a new subscription

#### Parameters

-   `params` **[Object][35]** 
    -   `params.type` **[string][36]** Type of conversation. Possible value(s) - sms. Check conversation.types for more options (optional, default `this.types.SMS`)
    -   `params.destinationAddress` **[string][36]?** The address that incoming messages are received for this subscription. If does not exist, CPaaS uses the default assigned DID number to subscribe against. It is suggested to provide the intended E164 formatted DID number within this parameter.
    -   `params.webhookURL` **[string][36]** HTTPS URL that is present in your application server which is accessible from the public web where the notifications should be sent to. Note: Should be a <code>POST</code> endpoint.

Returns **[Promise][38]&lt;[Object][35]>** 

### unsubscribe

Unsubscription from conversation notification

#### Parameters

-   `params` **[Object][35]** 
    -   `params.type` **[string][36]** Type of conversation. Possible value(s) - sms. Check conversation.types for more options (optional, default `this.types.SMS`)
    -   `params.subscriptionId` **[string][36]** Resource ID of the subscription

Returns **[Promise][38]&lt;[Object][35]>** 

## Notification

CPaaS notification helper methods

### parse

Parse inbound sms notification received in webhook. It parses the notification and returns
simplified version of the response.

#### Parameters

-   `notification` **[Object][35]** JSON received in the subscription webhook.

Returns **[Object][35]** 

## Twofactor

CPaaS provides Authentication API where a two-factor authentication (2FA) flow can be implemented by using that.

### sendCode

Create a new authentication code

#### Parameters

-   `params` **[Object][35]** 
    -   `params.destinationAddress` **([Array][37]&lt;[string][36]> | [string][36])** Destination address of the authentication code being sent. For sms type authentication codes, it should contain a E164 phone number. For e-mail type authentication codes, it should contain a valid e-mail address.
    -   `params.message` **[string][36]** Message text sent to the destination, containing the placeholder for the code within the text. CPaaS requires to have _{code}_ string within the text in order to generate a code and inject into the text. For email type code, one usage is to have the _{code}_ string located within the link in order to get a unique link.
    -   `params.subject` **[string][36]?** When the method is passed as email then subject becomes a mandatory field to pass. The value passed becomes the subject line of the 2FA code email that is sent out to the destinationAddress.
    -   `params.expiry` **[number][39]** Lifetime duration of the code sent in seconds. This can contain values between 30 and 3600 seconds. (optional, default `120`)
    -   `params.length` **[number][39]** Length of the authentication code tha CPaaS should generate for this request. It can contain values between 4 and 10. (optional, default `6`)
    -   `params.method` **[string][36]** Type of the authentication code delivery method, sms and email are supported types. Possible values: sms, email (optional, default `'sms'`)
    -   `params.type` **[string][36]** Type of the code that is generated. If not provided, default value is numeric. Possible values: numeric, alphanumeric, alphabetic (optional, default `'numeric'`)

Returns **[Promise][38]&lt;[Object][35]>** 

### verifyCode

Verifying authentication code

#### Parameters

-   `params` **[Object][35]** 
    -   `params.codeId` **[string][36]** ID of the authentication code.
    -   `params.verificationCode` **[string][36]** Code that is being verified

Returns **[Promise][38]&lt;[Object][35]>** 

### resendCode

Resending the authentication code via same code resource, invalidating the previously sent code.

#### Parameters

-   `params` **[Object][35]** 
    -   `params.destinationAddress` **([Array][37]&lt;[string][36]> | [string][36])** Destination address of the authentication code being sent. For sms type authentication codes, it should contain a E164 phone number. For e-mail type authentication codes, it should contain a valid e-mail address.
    -   `params.codeId` **[string][36]** ID of the authentication code.
    -   `params.message` **[string][36]** Message text sent to the destination, containing the placeholder for the code within the text. CPaaS requires to have _{code}_ string within the text in order to generate a code and inject into the text. For email type code, one usage is to have the _{code}_ string located within the link in order to get a unique link.
    -   `params.subject` **[string][36]?** When the method is passed as email then subject becomes a mandatory field to pass. The value passed becomes the subject line of the 2FA code email that is sent out to the destinationAddress.
    -   `params.expiry` **[number][39]** Lifetime duration of the code sent in seconds. This can contain values between 30 and 3600 seconds. (optional, default `120`)
    -   `params.length` **[number][39]** Length of the authentication code tha CPaaS should generate for this request. It can contain values between 4 and 10. (optional, default `6`)
    -   `params.method` **[string][36]** Type of the authentication code delivery method, sms and email are supported types. Possible values: sms, email (optional, default `'sms'`)
    -   `params.type` **[string][36]** Type of the code that is generated. If not provided, default value is numeric. Possible values: numeric, alphanumeric, alphabetic (optional, default `'numeric'`)

Returns **[Promise][38]&lt;[Object][35]>** 

### deleteCode

Delete authentication code resource.

#### Parameters

-   `params` **[Object][35]** 
    -   `params.codeId` **[string][36]** \-ID of the authentication code.

Returns **[Promise][38]&lt;[Object][35]>** 

[1]: #createclient

[2]: #parameters

[3]: #examples

[4]: #conversation

[5]: #createmessage

[6]: #parameters-1

[7]: #getmessages

[8]: #parameters-2

[9]: #getstatus

[10]: #parameters-3

[11]: #getmessagesinthread

[12]: #parameters-4

[13]: #deletemessage

[14]: #parameters-5

[15]: #getsubscriptions

[16]: #parameters-6

[17]: #getsubscription

[18]: #parameters-7

[19]: #subscribe

[20]: #parameters-8

[21]: #unsubscribe

[22]: #parameters-9

[23]: #notification

[24]: #parse

[25]: #parameters-10

[26]: #twofactor

[27]: #sendcode

[28]: #parameters-11

[29]: #verifycode

[30]: #parameters-12

[31]: #resendcode

[32]: #parameters-13

[33]: #deletecode

[34]: #parameters-14

[35]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[36]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[37]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[38]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[39]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number
